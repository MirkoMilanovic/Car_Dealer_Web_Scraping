(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){function n(e){return e}function r(e){return decodeURIComponent(e.replace(t," "))}function i(e){if(e.indexOf('"')===0){e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return s.json?JSON.parse(e):e}catch(t){}}var t=/\+/g;var s=e.cookie=function(t,o,u){if(o!==undefined){u=e.extend({},s.defaults,u);if(typeof u.expires==="number"){var a=u.expires,f=u.expires=new Date;f.setDate(f.getDate()+a)}o=s.json?JSON.stringify(o):String(o);return document.cookie=[s.raw?t:encodeURIComponent(t),"=",s.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}var l=s.raw?n:r;var c=document.cookie.split("; ");var h=t?undefined:{};for(var p=0,d=c.length;p<d;p++){var v=c[p].split("=");var m=l(v.shift());var g=l(v.join("="));if(t&&t===m){h=i(g);break}if(!t){h[m]=i(g)}}return h};s.defaults={};e.removeCookie=function(t,n){if(e.cookie(t)!==undefined){e.cookie(t,"",e.extend({},n,{expires:-1}));return true}return false}});
var PA=PA||{};PA.common={loaderStart:function(){$("body").append('<div class="spinner-overlay"></div>').append('<div class="spinner-holder"><div class="spinner-loader"></div><div class="spinner-loader2"></div><div class="spinner-loader3"></div></div>');$(".spinner-overlay").show()},loaderStop:function(){$(".spinner-holder").remove();$(".spinner-overlay").remove()},closeTestMessage:function(){$(".__close_dev_message").click(function(){var midnight=new Date;midnight.setHours(23,59,59,0);var user=JSON.parse(localStorage.getItem("user"));if(typeof user=="undefined"||user==null){return false}if(typeof user=="undefined"||user.userId=="undefined"||user.userId==""||user.userId==null){return false}$(".__dev_message").addClass("uk-hidden");$.cookie("dev-test-cookie-"+user.userId,"1",{expires:midnight})})},toggleTestMessage:function(){var midnight=new Date;midnight.setHours(23,59,59,0);var user=JSON.parse(localStorage.getItem("user"));if(typeof user=="undefined"||user==null){return false}if(typeof user=="undefined"||user.userId=="undefined"||user.userId==""||user.userId==null){return false}if(typeof $.cookie("dev-test-cookie-"+user.userId)==="undefined"){$(".__dev_message").removeClass("uk-hidden")}},searchToggle:function(){$(".js-refine-search").on("click",function(){$(".search-holder-box").slideToggle();var visibleSearch=$(".pr_advanced_search");var visibleSearchAction=visibleSearch.is(":visible");if(visibleSearchAction===true){$(".pr_advanced_search").slideDown()}else{$(".pr_advanced_search").slideToggle()}});$("form.uk-form").change(function(){$(".js-submit-form").addClass("active");$("button#submit_1").addClass("button-orange")});$("form.uk-form input").keypress(function(){$(".js-submit-form").addClass("active");$("button#submit_1").addClass("button-orange")})},searchToggleSubmit:function(){$(".js-submit-form").click(function(){$("#search-form form #page").val("1");$("#search-form form").submit()})},categoriesTabs:function(){$(".choose-category-mob").click(function(){var screen_height=$(window).height();var document_height=$(document).height();$(".ttett").css("height",screen_height-20);$(".main-categories").css("height",document_height);$(".categories-tabs").toggle();$(window).resize(function(){var screen_height=$(window).height();$(".ttett").css("height",screen_height-20)})});$(".sub-cat-truks").click(function(){$(".main-categories a").removeClass("active");$(this).addClass("active");$(".sub-categories").hide();$(".sub-cat-truks-holder").show();return false});$(".sub-cat-tractor").click(function(){$(".main-categories a").removeClass("active");$(this).addClass("active");$(".sub-categories").hide();$(".sub-cat-tractor-holder").show();return false});$(".sub-cat-parts").click(function(){$(".main-categories a").removeClass("active");$(this).addClass("active");$(".sub-categories").hide();$(".sub-cat-parts-holder").show();return false})},wbAlign:function(){var cont_width=($(document).width()-$(".header-holder .uk-container").width())/2;var cont_width_spacing=cont_width-1010;$(".wallbanners .wb-left").css("left",cont_width_spacing);$(".wallbanners .wb-right").css("right",cont_width_spacing);$(".wallbanners .wb-left").show();$(".wallbanners .wb-right").show();$(".wallbanners").show();$(window).scroll(function(){var topHeaderHeight=$(".ask-permission-holder").height()+$(".header-holder").height();var windowTop=topHeaderHeight-$(window).scrollTop();if($(window).scrollTop()<=topHeaderHeight){$(".wb-left, .wb-right").css("top",windowTop)}else{$(".wb-left, .wb-right").css("top","0")}})},megaMenu:function(){var cont_width=$(".body").width()+20;$(".mm").css("width",cont_width)},bindBrandToModel:function(brand_el,model_el,category,type,names){if(names===undefined){names=false}brand_el.on("change",function(){var brand=brand_el.val();var showOldNew=$("#showOldNew").val();if(showOldNew=="new"){type="onlyNew"}model_el.val(0).prop("disabled",true);if(typeof model_el[0].sumo!=="undefined"){model_el[0].sumo.reload()}if(brand=="0"||brand==""||brand==629||brand==4497||brand=="ostalo"||brand=="univerzalno"){$(model_el).parent().find("span").text("Model");return}$.get("/search/models",{category:category,brand:brand,type:type,names:names},function(response){model_el.empty();if(response!==""){model_el.append(response).prop("disabled",false)}else{model_el.append("<option>Svi modeli</option>").prop("disabled",true)}if(typeof model_el[0].sumo!=="undefined"){model_el[0].sumo.reload()}})})},bindBrandToModelLoad:function(){window.setTimeout(function(){var brand_el=$("#brand");if(brand_el=="undefined"){return false}var brand=$(".sumo_brand > p").attr("title");var brand_id=$("#brand option").filter(function(){brand=$.trim(brand);return $(this).html()==brand}).val();brand_el.trigger("change",function(){brand_el.val(brand_id)})},100)},bindTypeToSubtype:function(type_el,subtype_el,category){type_el.on("change",function(){var type=type_el.val();subtype_el.val(0).prop("disabled",true);subtype_el[0].sumo.reload();if(type=="0"||type==""){return}$.get("/search/subtypes",{category:category,type:type},function(response){subtype_el.empty();if(response!==""){subtype_el.append(response).prop("disabled",false)}else{subtype_el.prop("disabled",true)}subtype_el[0].sumo.reload()})})},fb_login:function(){FB.getLoginStatus(function(response){FB.login(function(response){if(response.authResponse){var data={userID:response.authResponse["userID"],accessToken:response.authResponse["accessToken"],tokenExpires:response.authResponse["expiresIn"]};$.post("/connectFacebook",data,function(response){if(response==true){document.location=location.pathname+"?fb_success=true"}else if(response=="alreadyConnected"){UIkit.modal.alert($("#fb_already_connected").html(),{labels:{Ok:"U redu"}})}else{UIkit.modal.alert($("#fb_error").html(),{labels:{Ok:"U redu"}})}})}},{scope:"email"})})},gaAnalyticsEvents:function(){$(".js_ga-event").on("click",function(){var data_eventCategory=$(this).data("category");var data_eventAction=$(this).data("action");var data_eventLabel=$(this).data("label");ga("send","event",data_eventCategory,data_eventAction,data_eventLabel)})},removeAlert:function(){var alert_notification_1=$(".js-uk-alert-notification").prevAll("input, select, textarea");var alert_notification_2=$(".js-uk-alert-notification").prev().children(".CaptionCont");var alert_notification_3=$(".js-uk-alert-notification").parent().parent(".has-error-checkbox");var alert_notification_4=$(".js-uk-alert-notification").parent(".paymentType").children("label");var alert_notification_5=$(".js-uk-alert-notification").parent().children(".js_upload_button_holder");alert_notification_1.addClass("form-error-marker");alert_notification_2.addClass("form-error-marker");alert_notification_3.children().addClass("form-error-marker");alert_notification_4.addClass("form-error-marker").addClass("form-error-marker-padding-fix").addClass("position-relative");alert_notification_5.addClass("form-error-marker");alert_notification_2.on("click",function(){$(this).parent().next(".js-uk-alert-notification").hide()});alert_notification_3.on("click",function(){$(this).children().children(".js-uk-alert-notification").hide()});alert_notification_4.on("click",function(){$(this).next(".js-uk-alert-notification").hide()});alert_notification_5.on("click",function(){$(this).next(".js-uk-alert-notification").hide()});$("input, select").on("click",function(){$(this).next(".js-uk-alert-notification").hide();$(this).parent().next(".js-uk-alert-notification").hide()});$("textarea").next(".js-uk-alert-notification").css("top","-60px").css("bottom","initial");$("textarea").on("click",function(){$(this).next(".js-uk-alert-notification").hide()})},report:function(classifiedId){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/report",function(response){PA.common.loaderStop();var modal=UIkit.modal.dialog(response.html);modal.show();$(".close-report-windows").on("click",function(){modal.hide()});$(".submit-report").on("click",function(){PA.common.reportModal(classifiedId,modal)})})},reportModal:function(classifiedId,modal){PA.common.loaderStart();$.post("/classified/"+classifiedId+"/report",$("#report-modal form").serialize(),function(response){PA.common.loaderStop();if(response.success){modal.hide();UIkit.modal.alert(response.html,{labels:{Ok:"U redu"}})}else{$("#report-modal").html(response.html);$(".submit-report").on("click",function(){PA.common.reportModal(classifiedId,modal)});$(".close-report-windows").on("click",function(){modal.hide()})}})},bindToTireCategory:function(tire_category_el,width_el,height_el,radius_el){tire_category_el.on("change",function(){var tire_category=tire_category_el.val();width_el.val(0).prop("disabled",true);height_el.val(0).prop("disabled",true);radius_el.val(0).prop("disabled",true);if(typeof width_el[0].sumo!=="undefined"){width_el[0].sumo.reload()}if(typeof height_el[0].sumo!=="undefined"){height_el[0].sumo.reload()}if(typeof radius_el[0].sumo!=="undefined"){radius_el[0].sumo.reload()}if(tire_category=="0"||tire_category==""){$(width_el).parent().find("span").text("Širina");$(height_el).parent().find("span").text("Visina");$(radius_el).parent().find("span").text("Prečnik (R)");return}if($(this).data("change-action")){var form_actions={26:"/delovi-i-oprema/automobili/auto-gume/pretraga",29:"/delovi-i-oprema/motori/moto-gume/pretraga",32:"/delovi-i-oprema/delovi-i-oprema-za-transportna-vozila/kombi-i-kamionske-gume/pretraga",3382:"/delovi-i-oprema/delovi-za-poljoprivredne-masine/gume-za-traktor/pretraga",33:"/delovi-i-oprema/radne-masine/gume/pretraga"};$(this).parents("form").attr("action",form_actions[tire_category])}$.get("/search/tire-dimensions",{tire_category:tire_category},function(response){width_el.empty();height_el.empty();radius_el.empty();if(response!==""){width_el.append(response.width).prop("disabled",false);height_el.append(response.height).prop("disabled",false);radius_el.append(response.radius).prop("disabled",false)}else{width_el.append("<option>Širina</option>").prop("disabled",true);height_el.append("<option>Visina</option>").prop("disabled",true);radius_el.append("<option>Prečnik (R)</option>").prop("disabled",true)}if(typeof width_el[0].sumo!=="undefined"){width_el[0].sumo.reload()}if(typeof height_el[0].sumo!=="undefined"){height_el[0].sumo.reload()}if(typeof radius_el[0].sumo!=="undefined"){radius_el[0].sumo.reload()}})})},resetBoltPattern:function(){$("#type_2").on("change",function(){var bolt_pattern=$("#bolt_pattern");if(typeof bolt_pattern[0].sumo!=="undefined"){bolt_pattern.val(0);bolt_pattern[0].sumo.unload();bolt_pattern.SumoSelect({placeholder:" Broj i raspon rupa"});bolt_pattern[0].sumo.reload()}})},logout:function(){if(typeof localStorage!="undefined"){localStorage.removeItem("user");sessionStorage.removeItem("redirected")}var messaging=firebase.messaging();messaging.getToken().then(function(token){var firebaseToken=token;$.post("/preLogout",{firebaseToken:firebaseToken},function(){$.removeCookie("askedForPermission");window.location.href="/logout"})}).catch(function(){$.post("/preLogout",function(){window.location.href="/logout"})})},requestNotificationPermission:function(){var messaging=firebase.messaging();messaging.requestPermission().then(function(){var token=messaging.getToken();return token}).then(function(token){$.post("/notifications/firebase/token",{token:token},function(){})}).catch(function(err){})},checkIfAskForPermission:function(){if(typeof $.cookie("askedForPermission")=="undefined"){$("#ask-permission-holder").removeClass("uk-hidden");$(".js-notification-permission-button").on("click",function(){var data=$(this).data();if(data["answer"]==="yes"){var expiration=365*100;PA.common.requestNotificationPermission()}else if(data["answer"]==="later"){expiration=7}else{expiration=365*100}$("#ask-permission-holder").addClass("uk-hidden");$.cookie("askedForPermission",1,{path:"/",expires:expiration})})}},checkIfAskForPermissionModal:function(){if(typeof $.cookie("askedForPermission")=="undefined"){UIkit.modal.confirm('<div class="uk-text-center uk-text-bold">Da bi obaveštenja o oglasima za koje si zainteresovan stizala brže, <br>prihvati da primaš obaveštenja kroz pretraživač.</div><div class="uk-text-center uk-margin-top uk-margin-bottom"><img src="/bundles/site/images/web-push-notifications.png" alt="Push notifikacija" class="uk-thumbnail"></div>',function(){PA.common.requestNotificationPermission();$.cookie("askedForPermission",1,{path:"/",expires:365*100})},{labels:{Ok:"Želim da primam obaveštenja",Cancel:"Ne želim"}})}},featureSearch:function(classifiedId,page){PA.tools.classifiedFeatureSearch(classifiedId,page,function(){})},loadLoginHeaderNumbers:function(route){$.get("/common/header/numbers",{parent_route:route,url:window.location.href},function(response){if(response.notifications!=0){$(".js-unread-notifications").html(response.notifications).removeClass("uk-hidden")}if(response.unread_threads!=0){$(".js-unread-threads").html(response.unread_threads).removeClass("uk-hidden")}if(response.potential_buyers!=0){$(".js-potential-buyers").html(response.potential_buyers).removeClass("uk-hidden")}if(response.show_popup){UIkit.modal.alert(response.popup_notification_text,{labels:{Ok:"Zatvori"}});if(response.type=="search"){ga("send","event","Notifikacija","view","Prikaz notifikacije")}if(response.type=="classified-thank-you"){ga("send","event","Oglasavanje kupovine","view","Nasli smo ti kupca - popup")}$.ajax({type:"PUT",url:"/profile/notification/markRead",data:{notificationId:response.popup_notification_id}});PA.common.notifyOldActiveFeatureSearch()}})},loadLoginHeaderPartsAds:function(route,classifiedId){$.get("/common/header/partsAds",{parent_route:route,classifiedId:classifiedId},function(response){if(response.showDialog==true){PA.details.relatedPromotion()}})},bindFeaturingTracking:function(category,requestPage){if(requestPage==="home"){$(".home-classified a.car-thumb-holder.home-featured-ad").on("click contextmenu",function(){$.post("/featuring-tracking/web",{category:category,requestPage:requestPage,classifiedId:$(this).data("classifiedid")})})}else if(requestPage==="search-top"){$(".top-featured-holder a.classified-link").on("click contextmenu",function(){$.post("/featuring-tracking/web",{category:category,requestPage:requestPage,classifiedId:$(this).data("classifiedid")})})}},giveConsent:function(consent){$.ajax({url:"/consent/give/"+consent,type:"POST",success:function(response){console.log(response)}})},toggleConsent:function(){$(document).on("change",".consentHolder input:checkbox",function(){var consentType=$(this).attr("data-consent-type");var checked=$(this).is(":checked");if(consentType==="parent"){$(this).parent().parent().find(".sub_consents").each(function(){$(this).find("input[type = 'checkbox']").prop("checked",checked)})}PA.common.giveConsent($(this).attr("data-consent-id"))})},notifyOldActiveFeatureSearch:function(){$(".js-featureSearch-oldActive").on("click",function(){var data=$(this).data();var classifiedId=data["id"];$(".uk-modal-close").trigger("click");PA.common.featureSearch(classifiedId,"notifyOldActive")})},survey:function(type,url,content,cookieName,remindAfter){var expires=remindAfter||1;if(type==="basic"){var content=content}else{var content=content.html()}if($.cookie(cookieName)!=null){return false}$("body").append('<div class="general_survey">'+'<div class="poll-content">'+'<div class="uk-grid"><div class="uk-width-1-1">'+content+"</div></div>"+'<div class="uk-grid"><div class="uk-width-medium-3-4 uk-width-1-1"><div class="uk-width-medium-1-4 uk-hidden-small"></div><div class="uk-grid">'+'<div class="uk-width-medium-1-3 uk-width-1-1"><button class="uk-width-1-1 uk-button uk-button-success button-box-shadow-remove" id="btn_poll_yes">Želim</button></div>'+'<div class="uk-width-medium-1-3 uk-width-1-1"><button class="uk-width-1-1 uk-button uk-button-default button-box-shadow-remove" id="btn_poll_remindMe">Podseti me kasnije</button></div>'+'<div class="uk-width-medium-1-3 uk-width-1-1"><button class="uk-width-1-1 uk-button uk-button-link button-box-shadow-remove" id="btn_poll_no">Ne želim</button></div>'+"</div></div></div></div>"+"</div>");$("#btn_poll_yes").on("click",function(){$.cookie(cookieName,1,{path:"/",expires:365*100});$(".general_survey").remove();window.open(url,"_blank")});$("#btn_poll_no").on("click",function(){$.cookie(cookieName,1,{path:"/",expires:365*100});$(".general_survey").remove()});$("#btn_poll_remindMe").on("click",function(){$.cookie(cookieName,1,{path:"/",expires:expires});$(".general_survey").remove()});var documentHeight=$(window).height()/2;var pollHeight=$(".poll-content").height()/2;var pollPosition=documentHeight-pollHeight;$(".poll-content").css("margin-top",pollPosition)},paSignature:function(){console.log("______         _                       _                _                             _      _  _  _                            \n"+"| ___ \\       | |                     (_)              | |                           | |    (_)| |(_)                           \n"+"| |_/ /  ___  | |  ___  __   __ _ __   _   __ _  _   _ | |_   ___   _ __ ___    ___  | |__   _ | | _      ___   ___   _ __ ___  \n"+"|  __/  / _ \\ | | / _ \\ \\ \\ / /| '_ \\ | | / _` || | | || __| / _ \\ | '_ ` _ \\  / _ \\ | '_ \\ | || || |    / __| / _ \\ | '_ ` _ \\ \n"+"| |    | (_) || || (_) | \\ V / | | | || || (_| || |_| || |_ | (_) || | | | | || (_) || |_) || || || | _ | (__ | (_) || | | | | |\n"+"\\_|     \\___/ |_| \\___/   \\_/  |_| |_||_| \\__,_| \\__,_| \\__| \\___/ |_| |_| |_| \\___/ |_.__/ |_||_||_|(_) \\___| \\___/ |_| |_| |_|\n"+"                                                                                                                                \n"+"                                                                                                                                ")},setOrderFunctionality:function(section,dataTemplate){var querySelector;if(section=="all"){querySelector=".buttonOrder"}else{querySelector="."+section+"-section"+" .buttonOrder"}$(querySelector).click(function(e){e.stopPropagation();e.preventDefault();var user=JSON.parse(localStorage.getItem("user"));if(typeof user=="undefined"||user==null){window.location.href="/login?_target_path=/ponuda-avansnog-placanja"}else{$.post("/usluge/avansno-placanje",{template:dataTemplate,package:$(this).text()},function(response){UIkit.modal.alert(response.message,{labels:{Ok:"U redu"}})})}})},phoneVerify:function(){var phoneNumber=$(".js_cellphone").val();if(phoneNumber){PA.common.loaderStart();$.get("/phone-verify/"+phoneNumber+"/",function(response){PA.common.loaderStop();var modal=UIkit.modal.dialog(response.html);modal.show();$(".close-verify-windows").on("click",function(){modal.hide()});$(".submit-verify").on("click",function(){PA.common.phoneVerifyModal(phoneNumber,modal)})})}else{PA.common.loaderStop();var modal=UIkit.modal.alert("<p>Neophodno je da uneste broj telefona</p>",{labels:{Ok:"U redu"}});modal.show()}},phoneVerifyModal:function(phoneNumber,modal){PA.common.loaderStart();$.post("/phone-verify/"+phoneNumber+"/",$("#phone-verify-modal form").serialize(),function(response){PA.common.loaderStop();if(response.alert){modal.hide();UIkit.modal.alert(response.html,{labels:{Ok:"U redu"}})}else{$("#phone-verify-modal").html(response.html);$(".submit-verify").on("click",function(){PA.common.phoneVerifyModal(phoneNumber,modal)});$(".close-verify-windows").on("click",function(){modal.hide()})}})},phoneVerifySuccess:function(htmlContent){$(".js_verification_holder").empty().html(htmlContent)}};